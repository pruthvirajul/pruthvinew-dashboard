<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Signup</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<style>
body{
  margin:0;
  font-family:Arial, sans-serif;
  background:#f4f4f4;
}

header{
  background:linear-gradient(to right,#000,#1a237e);
  color:#fff;
  padding:15px;
  text-align:center;
}

.container{
  display:flex;
  height:calc(100vh - 70px);
}

.left{
  flex:1;
  background:url("https://th.bing.com/th/id/OIP.L_Iq2oSnC9ft5CuSFA0D_QHaHa?rs=1&pid=ImgDetMain") center/cover no-repeat;
}

.right{
  flex:1;
  display:flex;
  justify-content:center;
  align-items:center;
}

.form-box{
  width:350px;
  background:#fff;
  padding:25px;
  border-radius:8px;
  box-shadow:0 0 10px rgba(0,0,0,.1);
}

.form-box h2{
  text-align:center;
  color:#1a237e;
}

label{
  margin-top:12px;
  display:block;
  font-weight:bold;
}

input{
  width:100%;
  padding:8px;
  margin-top:5px;
}

button{
  width:100%;
  margin-top:15px;
  padding:10px;
  background:#1a237e;
  color:#fff;
  border:none;
  cursor:pointer;
}

button:hover{
  background:#000;
}

.error{
  color:red;
  font-size:13px;
}

.fingerprint{
  text-align:center;
  margin:15px 0;
  cursor:pointer;
}

.fingerprint i{
  font-size:45px;
}

.verified{
  color:green;
}
</style>
</head>

<body>

<header>
  <h2>Signup Form</h2>
  <p>Secure user registration</p>
</header>

<div class="container">
  <div class="left"></div>

  <div class="right">
    <div class="form-box">

      <h2>Create Account</h2>

      <form id="signupForm" enctype="multipart/form-data">

        <label>Username</label>
        <input type="text" id="name" required>

        <label>Email</label>
        <input type="email" id="email" required>

        <label>Password</label>
        <input type="password" id="password" required>

        <label>Profile Picture</label>
        <input type="file" id="profile">

        <div class="fingerprint" id="fingerprint">
          <i class="fas fa-fingerprint"></i>
          <p id="fingerError" class="error"></p>
        </div>

        <button type="submit">Sign Up</button>
      </form>

    </div>
  </div>
</div>

<script>
let fingerVerified = false;

document.getElementById("fingerprint").onclick = () => {
  alert("Place your finger on the sensor");
  setTimeout(()=>{
    fingerVerified = true;
    document.querySelector(".fingerprint i").classList.add("verified");
    alert("Fingerprint verified");
  },800);
};

document.getElementById("signupForm").addEventListener("submit", async (e)=>{
  e.preventDefault();

  if(!fingerVerified){
    document.getElementById("fingerError").innerText="Verify fingerprint first";
    return;
  }

  const fd = new FormData();
  fd.append("name", document.getElementById("name").value);
  fd.append("email", document.getElementById("email").value);
  fd.append("password", document.getElementById("password").value);

  const file = document.getElementById("profile").files[0];
  if(file) fd.append("profilePicture", file);

  try{
    const res = await fetch("http://13.51.48.214:3048/api/signup",{
      method:"POST",
      body:fd
    });

    const data = await res.json();

    if(res.ok){
      alert("Signup successful");
      window.location.href="http://13.51.48.214:8153/";
    }else{
      alert(data.message || "Signup failed");
    }

  }catch(err){
    alert("Server error");
  }
});
</script>

</body>
</html>
